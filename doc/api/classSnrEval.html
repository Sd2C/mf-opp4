<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Mobility Framework: SnrEval Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>SnrEval Class Reference<br>
<small>
[<a class="el" href="group__snrEval.html">snrEval - modules for attenuation and interference calculation</a>]</small>
</h1><!-- doxytag: class="SnrEval" --><!-- doxytag: inherits="BasicSnrEval" -->Keeps track of the different snir levels when receiving a packet.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="SnrEval_8h-source.html">SnrEval.h</a>&gt;</code>
<p>
Inherits <a class="el" href="classBasicSnrEval.html">BasicSnrEval</a>.
<p>
Inherited by <a class="el" href="classGilbertElliotSnr.html">GilbertElliotSnr</a>, and <a class="el" href="classSnrEval80211.html">SnrEval80211</a>.
<p>
Inheritance diagram for SnrEval:<p><center><img src="classSnrEval__inherit__graph.png" border="0" usemap="#SnrEval__inherit__map" alt="Inheritance graph"></center>
<map name="SnrEval__inherit__map">
<area href="classGilbertElliotSnr.html" shape="rect" coords="7,382,117,406" alt="">
<area href="classSnrEval80211.html" shape="rect" coords="141,382,245,406" alt="">
<area href="classBasicSnrEval.html" shape="rect" coords="77,233,178,257" alt="">
<area href="classChannelAccess.html" shape="rect" coords="70,158,185,182" alt="">
<area href="classBasicModule.html" shape="rect" coords="78,84,177,108" alt="">
<area href="classImNotifiable.html" shape="rect" coords="82,9,173,33" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for SnrEval:<p><center><img src="classSnrEval__coll__graph.png" border="0" usemap="#SnrEval__coll__map" alt="Collaboration graph"></center>
<map name="SnrEval__coll__map">
<area href="classBasicSnrEval.html" shape="rect" coords="331,316,433,340" alt="">
<area href="classChannelAccess.html" shape="rect" coords="325,214,439,238" alt="">
<area href="classBasicModule.html" shape="rect" coords="99,113,198,137" alt="">
<area href="classImNotifiable.html" shape="rect" coords="7,9,98,33" alt="">
<area href="classBlackboard.html" shape="rect" coords="122,9,210,33" alt="">
<area href="classHostMove.html" shape="rect" coords="411,113,491,137" alt="">
<area href="classBBItem.html" shape="rect" coords="567,9,634,33" alt="">
<area href="classActiveChannel.html" shape="rect" coords="478,164,587,188" alt="">
<area href="classRSSI.html" shape="rect" coords="603,265,657,289" alt="">
<area href="classMediumIndication.html" shape="rect" coords="663,164,789,188" alt="">
<area href="classCoord.html" shape="rect" coords="267,9,326,33" alt="">
<area href="classChannelControl.html" shape="rect" coords="273,113,387,137" alt="">
<area href="structSnrEval_1_1SnrStruct.html" shape="rect" coords="457,316,587,340" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classSnrEval-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#a0">initialize</a> (int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize variables and publish the radio status.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#a1">receiveBBItem</a> (int category, const <a class="el" href="classBBItem.html">BBItem</a> *details, int scopeModuleId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the <a class="el" href="classBlackboard.html">Blackboard</a> whenever a change occurs we're interested in.  <a href="#a1"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="x0"></a><!-- doxytag: member="SnrEval::cRecvBuff" ref="x0" args="" -->
typedef std::map&lt; AirFrame *,<br>
 double &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#x0">cRecvBuff</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Typedef used to store received messages together with receive power. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#b0">handleLowerMsgStart</a> (AirFrame *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Buffer the frame and update noise levels and snr information...  <a href="#b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#b1">handleLowerMsgEnd</a> (AirFrame *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unbuffer the frame and update noise levels and snr information.  <a href="#b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b2"></a><!-- doxytag: member="SnrEval::calcRcvdPower" ref="b2" args="(AirFrame *frame)" -->
virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#b2">calcRcvdPower</a> (AirFrame *frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates the power with which a packet is received. Overwrite this function to call all required loss elements, by default only pathloss is calculated. Fading, shadowing, antenna pattern are not evaluated in this class. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#b3">calcPathloss</a> (AirFrame *frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate the path loss.  <a href="#b3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#b4">addNewSnr</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">updates the snr information of the relevant AirFrames called in <a class="el" href="classSnrEval.html#b0">handleLowerMsgStart(AirFrame*)</a>  <a href="#b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b5"></a><!-- doxytag: member="SnrEval::handlePublish" ref="b5" args="(RSSI *r)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>handlePublish</b> (<a class="el" href="classRSSI.html">RSSI</a> *r)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#b6">modifySnrList</a> (<a class="el" href="group__basicUtils.html#ga0">SnrList</a> &amp;list)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">updates the snr information of the relevant AirFrame called in <a class="el" href="classSnrEval.html#b1">handleLowerMsgEnd(AirFrame*)</a>  <a href="#b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b7"></a><!-- doxytag: member="SnrEval::calcDuration" ref="b7" args="(cMessage *m)" -->
virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#b7">calcDuration</a> (cMessage *m)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate duration of this message. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p0"></a><!-- doxytag: member="SnrEval::snrInfo" ref="p0" args="" -->
<a class="el" href="structSnrEval_1_1SnrStruct.html">SnrStruct</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p0">snrInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SnrInfo stores the snrList and the the recvdPower for the message currently beeing received together with a pointer to the message. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p1"></a><!-- doxytag: member="SnrEval::recvBuff" ref="p1" args="" -->
<a class="el" href="classSnrEval.html#x0">cRecvBuff</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p1">recvBuff</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A buffer to store a pointer to a message and the related receive power. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p2"></a><!-- doxytag: member="SnrEval::radioState" ref="p2" args="" -->
<a class="el" href="classRadioState.html#w6">RadioState::States</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p2">radioState</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current state of active channel (radio), set using radio, updated via BB. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p3"></a><!-- doxytag: member="SnrEval::catRadioState" ref="p3" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p3">catRadioState</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">category number given by bb for <a class="el" href="classRadioState.html">RadioState</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p4"></a><!-- doxytag: member="SnrEval::rssi" ref="p4" args="" -->
<a class="el" href="classRSSI.html">RSSI</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p4">rssi</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Last <a class="el" href="classRSSI.html">RSSI</a> level. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p5"></a><!-- doxytag: member="SnrEval::catRSSI" ref="p5" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p5">catRSSI</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">category number given by bb for <a class="el" href="classRSSI.html">RSSI</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p6">publishRSSIAlways</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">if false, the <a class="el" href="classRSSI.html">RSSI</a> will not be published during the reception of a frame  <a href="#p6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p7"></a><!-- doxytag: member="SnrEval::indication" ref="p7" args="" -->
<a class="el" href="classMediumIndication.html">MediumIndication</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p7">indication</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">track and publish current occupation state of medium <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p8"></a><!-- doxytag: member="SnrEval::catIndication" ref="p8" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>catIndication</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p9"></a><!-- doxytag: member="SnrEval::nicModuleId" ref="p9" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p9">nicModuleId</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cache the module ID of the NIC. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p10"></a><!-- doxytag: member="SnrEval::noiseLevel" ref="p10" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p10">noiseLevel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The noise level of the channel. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p11"></a><!-- doxytag: member="SnrEval::recvTime" ref="p11" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p11">recvTime</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to store the time a radio switched to recieve. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p12"></a><!-- doxytag: member="SnrEval::waveLength" ref="p12" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p12">waveLength</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The wavelength. Calculated from the carrier frequency specified in the omnetpp.ini The carrier frequency used. Can be specified in the omnetpp.ini file. If not present it is read from the <a class="el" href="classChannelControl.html">ChannelControl</a> module. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p13"></a><!-- doxytag: member="SnrEval::thermalNoise" ref="p13" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p13">thermalNoise</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thermal noise on the channel. Can be specified in omnetpp.ini. Default: -100 dBm. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p14">pathLossAlphaHalf</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Path loss coefficient.  <a href="#p14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p15"></a><!-- doxytag: member="SnrEval::useTorus" ref="p15" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p15">useTorus</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">do we send on the surface of a torus <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p16"></a><!-- doxytag: member="SnrEval::playground" ref="p16" args="" -->
<a class="el" href="classCoord.html">Coord</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p16">playground</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">then we need to know the edges of the playground <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p17"></a><!-- doxytag: member="SnrEval::bitrate" ref="p17" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p17">bitrate</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">keep bitrate to calculate duration <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p18"></a><!-- doxytag: member="SnrEval::catBitrate" ref="p18" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#p18">catBitrate</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">BB category of bitrate. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="t0"></a><!-- doxytag: member="SnrEval::speedOfLight" ref="t0" args="" -->
static const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSnrEval.html#t0">speedOfLight</a> = 300000000.0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Speed of light. <br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d0"></a><!-- doxytag: member="SnrEval::Module_Class_Members" ref="d0" args="(SnrEval, BasicSnrEval, 0)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>Module_Class_Members</b> (<a class="el" href="classSnrEval.html">SnrEval</a>, <a class="el" href="classBasicSnrEval.html">BasicSnrEval</a>, 0)</td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSnrEval_1_1SnrStruct.html">SnrStruct</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struct to store a pointer to the mesage, rcvdPower AND a SnrList, needed in <a class="el" href="classSnrEval.html#b4">SnrEval::addNewSnr</a>.  <a href="structSnrEval_1_1SnrStruct.html#_details">More...</a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Keeps track of the different snir levels when receiving a packet. 
<p>
This module keeps track of the noise level of the channel.<p>
When receiving a packet this module updates the noise level of the channel. Based on the receive power of the packet it is processed and handed to upper layers or just treated as noise.<p>
After the packet is completely received the snir information is attached and it is handed to the deceider module. The snir information may be manipulated if the module received the frame before the radio was in received mode. The snir information is a SnrList that lists all different snr levels together with the point of time starting from which the radio is switched in the received mode.<p>
On top of that this module subscribs the <a class="el" href="classRadioState.html">RadioState</a> on the <a class="el" href="classBlackboard.html">Blackboard</a>. The radio state gives information about whether this module is sending a packet, receiving a packet or idle. This information can be accessed via the <a class="el" href="classBlackboard.html">Blackboard</a> by other modules, e.g. a <a class="el" href="classCSMAMacLayer.html">CSMAMacLayer</a>.<p>
<dl compact><dt><b>Author:</b></dt><dd>Marc Loebbers, Jamarin Phongcharoen, Andreas Koepke</dd></dl>

<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b4"></a><!-- doxytag: member="SnrEval::addNewSnr" ref="b4" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrEval::addNewSnr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
updates the snr information of the relevant AirFrames called in <a class="el" href="classSnrEval.html#b0">handleLowerMsgStart(AirFrame*)</a> 
<p>
The Snr information of the buffered message is updated....    </td>
  </tr>
</table>
<a class="anchor" name="b3"></a><!-- doxytag: member="SnrEval::calcPathloss" ref="b3" args="(AirFrame *frame)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double SnrEval::calcPathloss           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AirFrame *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>frame</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Calculate the path loss. 
<p>
This function simply calculates with how much power the signal arrives "here". If a different way of computing the path loss is required this function can be redefined.    </td>
  </tr>
</table>
<a class="anchor" name="b1"></a><!-- doxytag: member="SnrEval::handleLowerMsgEnd" ref="b1" args="(AirFrame *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrEval::handleLowerMsgEnd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AirFrame *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>frame</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unbuffer the frame and update noise levels and snr information. 
<p>
This function is called right after the transmission is over, i.e. right after unbuffering.<p>
First check the current radio state. The radio must not be switched from RECV state before the end of message is received. Otherwise drop the message. Additionally the snr information of the currently being received message (if any) has to be updated with the receivetime as timestamp and a new snr value. The new SnrList and the AirFrame are sent to the decider.
<p>
Reimplemented from <a class="el" href="classBasicSnrEval.html#z20_3">BasicSnrEval</a>.
<p>
Reimplemented in <a class="el" href="classGilbertElliotSnr.html#b2">GilbertElliotSnr</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0"></a><!-- doxytag: member="SnrEval::handleLowerMsgStart" ref="b0" args="(AirFrame *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrEval::handleLowerMsgStart           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">AirFrame *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>frame</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Buffer the frame and update noise levels and snr information... 
<p>
This function is called right after a packet arrived, i.e. right before it is buffered for 'transmission time'.<p>
First must to decide whether the message is "really" received or whether it's receive power is so low that it is just treated as noise. If the energy of the message is high enough to really receive it an snr list (<a class="el" href="group__basicUtils.html#ga0">SnrList</a>) should be created to be able to store sn(i)r information for that message. Every time a new message a new snr value with a timestamp is added to that list. If the receive power of the frame is below the receiver sensibility, the frame is added to the accumulated noise.
<p>
Implements <a class="el" href="classBasicSnrEval.html#z20_2">BasicSnrEval</a>.
<p>
Reimplemented in <a class="el" href="classGilbertElliotSnr.html#b1">GilbertElliotSnr</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0"></a><!-- doxytag: member="SnrEval::initialize" ref="a0" args="(int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrEval::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>stage</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize variables and publish the radio status. 
<p>
All values not present in the ned file will be read from the <a class="el" href="classChannelControl.html">ChannelControl</a> module or assigned default values.
<p>
Reimplemented from <a class="el" href="classBasicSnrEval.html#a1">BasicSnrEval</a>.
<p>
Reimplemented in <a class="el" href="classGilbertElliotSnr.html#a0">GilbertElliotSnr</a>, and <a class="el" href="classSnrEval80211.html#a1">SnrEval80211</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b6"></a><!-- doxytag: member="SnrEval::modifySnrList" ref="b6" args="(SnrList &amp;list)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrEval::modifySnrList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group__basicUtils.html#ga0">SnrList</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>list</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
updates the snr information of the relevant AirFrame called in <a class="el" href="classSnrEval.html#b1">handleLowerMsgEnd(AirFrame*)</a> 
<p>
The Snr information of the buffered message is updated....<p>
If the frame arrived before the radio was ready to received, the snir information must be new calculated. The new snir information is a SnrList that lists all different snr levels together with the point of time starting from which the radio is switched in the received mode.    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="SnrEval::receiveBBItem" ref="a1" args="(int category, const BBItem *details, int scopeModuleId)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SnrEval::receiveBBItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classBBItem.html">BBItem</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>details</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>scopeModuleId</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by the <a class="el" href="classBlackboard.html">Blackboard</a> whenever a change occurs we're interested in. 
<p>
The SnrEval has subscreibed the NewRadioState and will be informed each time the radio state changes. The time radio switched to RECV must be noted.
<p>
Reimplemented from <a class="el" href="classBasicSnrEval.html#a4">BasicSnrEval</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p14"></a><!-- doxytag: member="SnrEval::pathLossAlphaHalf" ref="p14" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double <a class="el" href="classSnrEval.html#p14">SnrEval::pathLossAlphaHalf</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Path loss coefficient. 
<p>
Can be specified in omnetpp.ini. If not it is read from the <a class="el" href="classChannelControl.html">ChannelControl</a> module. This value CANNOT be smaller than the one specified in the <a class="el" href="classChannelControl.html">ChannelControl</a> module. The simulation will exit with an error! The stored value is smaller to enable faster calculation using the square of the distance.    </td>
  </tr>
</table>
<a class="anchor" name="p6"></a><!-- doxytag: member="SnrEval::publishRSSIAlways" ref="p6" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="classSnrEval.html#p6">SnrEval::publishRSSIAlways</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
if false, the <a class="el" href="classRSSI.html">RSSI</a> will not be published during the reception of a frame 
<p>
Set it to false if you want a small speed up in the simulation.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="SnrEval_8h-source.html">SnrEval.h</a><li>SnrEval.cc</ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Jan 12 08:30:21 2007 for Mobility Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
