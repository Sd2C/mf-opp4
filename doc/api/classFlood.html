<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Mobility Framework: Flood Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Flood Class Reference<br>
<small>
[<a class="el" href="group__netwLayer.html">netwLayer - network layer modules</a>]</small>
</h1><!-- doxytag: class="Flood" --><!-- doxytag: inherits="SimpleNetwLayer" -->A simple flooding protocol.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Flood_8h-source.html">Flood.h</a>&gt;</code>
<p>
Inherits <a class="el" href="classSimpleNetwLayer.html">SimpleNetwLayer</a>.
<p>
Inheritance diagram for Flood:<p><center><img src="classFlood__inherit__graph.png" border="0" usemap="#Flood__inherit__map" alt="Inheritance graph"></center>
<map name="Flood__inherit__map">
<area href="classSimpleNetwLayer.html" shape="rect" coords="7,233,133,257" alt="">
<area href="classBasicLayer.html" shape="rect" coords="26,158,114,182" alt="">
<area href="classBasicModule.html" shape="rect" coords="21,83,119,107" alt="">
<area href="classImNotifiable.html" shape="rect" coords="25,9,115,33" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for Flood:<p><center><img src="classFlood__coll__graph.png" border="0" usemap="#Flood__coll__map" alt="Collaboration graph"></center>
<map name="Flood__coll__map">
<area href="classSimpleNetwLayer.html" shape="rect" coords="66,267,192,291" alt="">
<area href="classBasicLayer.html" shape="rect" coords="25,177,113,201" alt="">
<area href="classBasicModule.html" shape="rect" coords="60,99,158,123" alt="">
<area href="classSimpleArp.html" shape="rect" coords="137,177,220,201" alt="">
<area href="classImNotifiable.html" shape="rect" coords="8,9,98,33" alt="">
<area href="classBlackboard.html" shape="rect" coords="122,9,210,33" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classFlood-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0"></a><!-- doxytag: member="Flood::Module_Class_Members" ref="a0" args="(Flood, SimpleNetwLayer, 0)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>Module_Class_Members</b> (<a class="el" href="classFlood.html">Flood</a>, <a class="el" href="classSimpleNetwLayer.html">SimpleNetwLayer</a>, 0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#a1">initialize</a> (int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of omnetpp.ini parameters.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a2"></a><!-- doxytag: member="Flood::finish" ref="a2" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>finish</b> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="x0"></a><!-- doxytag: member="Flood::cBroadcastList" ref="x0" args="" -->
typedef std::list&lt; Bcast &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>cBroadcastList</b></td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#b0">handleUpperMsg</a> (cMessage *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from upper layer.  <a href="#b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#b1">handleLowerMsg</a> (cMessage *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from lower layer.  <a href="#b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b2"></a><!-- doxytag: member="Flood::handleSelfMsg" ref="b2" args="(cMessage *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#b2">handleSelfMsg</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">we have no self messages <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#b3">notBroadcasted</a> (NetwPkt *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks whether a message was already broadcasted.  <a href="#b3"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p0"></a><!-- doxytag: member="Flood::seqNum" ref="p0" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#p0">seqNum</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Network layer sequence number. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p1"></a><!-- doxytag: member="Flood::defaultTtl" ref="p1" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#p1">defaultTtl</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default time-to-live (ttl) used for this module. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p2"></a><!-- doxytag: member="Flood::plainFlooding" ref="p2" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#p2">plainFlooding</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines whether to use plain flooding or not. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p3"></a><!-- doxytag: member="Flood::bcMsgs" ref="p3" args="" -->
cBroadcastList&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#p3">bcMsgs</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of already broadcasted messages. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p4"></a><!-- doxytag: member="Flood::bcMaxEntries" ref="p4" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#p4">bcMaxEntries</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Max number of entries in the list of already broadcasted messages. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p5"></a><!-- doxytag: member="Flood::bcDelTime" ref="p5" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFlood.html#p5">bcDelTime</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time after which an entry for an already broadcasted msg can be deleted. <br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>Bcast</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A simple flooding protocol. 
<p>
This implementation uses plain flooding, i.e. it "remembers" (stores) already broadcasted messages in a list and does not rebroadcast them again, if it gets another copy of that message.<p>
The maximum number of entires for that list can be defined in the .ini file (<a class="el" href="classFlood.html#p4">bcMaxEntries</a>) as well as the time after which an entry is deleted (<a class="el" href="classFlood.html#p5">bcDelTime</a>).<p>
If you prefere a memory-less version you can comment out the <div class="fragment"><pre class="fragment">#define PLAINFLOODING </pre></div><p>
<dl compact><dt><b>Author:</b></dt><dd>Daniel Willkomm</dd></dl>

<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b1"></a><!-- doxytag: member="Flood::handleLowerMsg" ref="b1" args="(cMessage *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Flood::handleLowerMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>m</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle messages from lower layer. 
<p>
Messages from the mac layer will be forwarded to the application only if the are broadcast or destined for this node.<p>
If the arrived message is a broadcast message it is also reflooded only if the tll field is bigger than one. Before the message is handed back to the mac layer the ttl field is reduced by one to account for this hop.<p>
In the case of plain flooding the message will only be processed if there is no corresponding entry in the bcMsgs list (<a class="el" href="classFlood.html#b3">notBroadcasted</a>). Otherwise the message will be deleted.
<p>
Reimplemented from <a class="el" href="classSimpleNetwLayer.html#z5_1">SimpleNetwLayer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0"></a><!-- doxytag: member="Flood::handleUpperMsg" ref="b0" args="(cMessage *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Flood::handleUpperMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">cMessage *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>m</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle messages from upper layer. 
<p>
All messages have to get a sequence number and the ttl filed has to be specified. Afterwards the messages can be handed to the mac layer. The mac address is set to -1 (broadcast address) because the message is flooded (i.e. has to be send to all neighbors)<p>
In the case of plain flooding the message sequence number and source address has also be stored in the bcMsgs list, so that this message will not be rebroadcasted, if a copy will be flooded back from the neigbouring nodes.<p>
If the maximum number of entries is reached the first (oldest) entry is deleted.
<p>
Reimplemented from <a class="el" href="classSimpleNetwLayer.html#z5_0">SimpleNetwLayer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="Flood::initialize" ref="a1" args="(int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Flood::initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>stage</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialization of omnetpp.ini parameters. 
<p>
Reads all parameters from the ini file. If a parameter is not specified in the ini file a default value will be set.
<p>
Reimplemented from <a class="el" href="classSimpleNetwLayer.html#a1">SimpleNetwLayer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b3"></a><!-- doxytag: member="Flood::notBroadcasted" ref="b3" args="(NetwPkt *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool Flood::notBroadcasted           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">NetwPkt *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks whether a message was already broadcasted. 
<p>
The bcMsgs list is searched for the arrived message. If the message is in the list, it was already broadcasted and the function returns false.<p>
Concurrently all outdated (older than bcDelTime) are deleted. If the list is full and a new message has to be entered, the oldest entry is deleted.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Flood_8h-source.html">Flood.h</a><li>Flood.cc</ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Jan 12 08:29:59 2007 for Mobility Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
